@using WhitelistExecuter.Web.Extensions
@model WhitelistExecuter.Web.Models.HomeModel

@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
            </p>
        </div>
    </section>
}
@if (User.Identity.IsAuthenticated)
{
    <h1>Execute a command</h1>

    using (Html.BeginForm("ExecuteCommand", "Home"))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()
        <fieldset>
            <legend>Registration Form</legend>
            <ol>
                <li>
                    @Html.LabelFor(m => m.RelativePath)
                    @Html.TextBoxFor(m => m.RelativePath)
                </li>
                <li>
                    @Html.LabelFor(m => m.Command)
                    @Html.EnumDropDownListFor(m => m.Command)
                </li>
            </ol>
            <input type="submit" value="Execute" />
        </fieldset>
    }
    
    if (null != Model.Error)
    {
        <h3>Error:</h3>
        <pre>@Model.Error</pre>
    }
    else
    {
        <h3>Standard Output:</h3>
        <pre>@Model.StandardOutput</pre>
        <h3>Standard Error:</h3>
        <pre>@Model.StandardError</pre>
    }
}
else
{
    <h1>You are not logged in.</h1>
    <h2>Just Sayin'.</h2>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
